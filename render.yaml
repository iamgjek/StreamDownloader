# Render Blueprint：後端 API（與前端 Vercel 搭配使用）
# 說明：https://render.com/docs/infrastructure-as-code

databases:
  - name: stream-downloader-db
    plan: free
    databaseName: stream_downloader
    user: sduser

services:
  - type: web
    name: stream-downloader-api
    runtime: python
    rootDir: backend

    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn app.main:app --host 0.0.0.0 --port $PORT

    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: stream-downloader-db
          property: connectionString

    # 以下環境變數請在 Render Dashboard 的 Service → Environment 中設定（勿提交敏感值）：
    # - SECRET_KEY          （JWT 用，正式環境必改）
    # - CORS_ORIGINS        （前端網址，例如 https://your-app.vercel.app）
    # - OPENSUBTITLES_API_KEY（選用，字幕搜尋）
